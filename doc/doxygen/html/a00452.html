<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Loki: Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<b>Loki</b>::<a class="el" href="a00452.html">AllocatorSingleton</a></div>
<h1>Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy &gt; Class Template Reference</h1><!-- doxytag: class="Loki::AllocatorSingleton" --><!-- doxytag: inherits="Loki::SmallObjAllocator" -->Inheritance diagram for Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy &gt;:<p><center><img src="a00490.png" border="0" usemap="#a00491" alt="Inheritance graph"></center>
<map name="a00491">
<area href="a00455.html" shape="rect" coords="256,17,400,44" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy &gt;:<p><center><img src="a00492.png" border="0" usemap="#a00493" alt="Collaboration graph"></center>
<map name="a00493">
<area href="a00455.html" shape="rect" coords="256,231,400,257" alt="">
<area href="a00454.html" shape="rect" coords="267,140,389,167" alt="">
<area href="a00453.html" shape="rect" coords="289,17,367,44" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="a00099.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="w0"></a><!-- doxytag: member="Loki::AllocatorSingleton::MyAllocator" ref="w0" args="" -->
typedef <a class="el" href="a00452.html">AllocatorSingleton</a>&lt;<br>
 ThreadingModel, chunkSize,<br>
 maxSmallObjectSize, objectAlignSize,<br>
 LifetimePolicy &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#w0">MyAllocator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines type of allocator. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="w1"></a><!-- doxytag: member="Loki::AllocatorSingleton::MyThreadingModel" ref="w1" args="" -->
typedef ThreadingModel&lt; <a class="el" href="a00452.html">MyAllocator</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#w1">MyThreadingModel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines type for thread-safety locking mechanism. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="w2"></a><!-- doxytag: member="Loki::AllocatorSingleton::MyAllocatorSingleton" ref="w2" args="" -->
typedef Loki::SingletonHolder&lt;<br>
 <a class="el" href="a00452.html">MyAllocator</a>, Loki::CreateStatic,<br>
 LifetimePolicy, ThreadingModel &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#w2">MyAllocatorSingleton</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines singleton made from allocator. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0"></a><!-- doxytag: member="Loki::AllocatorSingleton::AllocatorSingleton" ref="a0" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#a0">AllocatorSingleton</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default constructor is not meant to be called directly. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1"></a><!-- doxytag: member="Loki::AllocatorSingleton::~AllocatorSingleton" ref="a1" args="(void)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#a1">~AllocatorSingleton</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The destructor is not meant to be called directly. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e0"></a><!-- doxytag: member="Loki::AllocatorSingleton::Instance" ref="e0" args="(void)" -->
static <a class="el" href="a00452.html">AllocatorSingleton</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#e0">Instance</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns reference to the singleton. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00452.html#e1">ClearExtraMemory</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;template&lt; class &gt; class ThreadingModel = ::Loki::SingleThreaded, std::size_t chunkSize = 4096, std::size_t maxSmallObjectSize = 256, std::size_t objectAlignSize = 4, template&lt; class &gt; class LifetimePolicy = Loki::NoDestroy&gt;<br>
 class Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy &gt;</h3>

class is derived from <a class="el" href="a00455.html">SmallObjAllocator</a> in order to pass template arguments into it, and still have a default constructor for the singleton. Each instance is a unique combination of all the template parameters, and hence is singleton only with respect to those parameters. The template parameters have default values and the class has typedefs identical to both <a class="el" href="a00456.html">SmallObject</a> and <a class="el" href="a00458.html">SmallValueObject</a> so that this class can be used directly instead of going through <a class="el" href="a00456.html">SmallObject</a> or <a class="el" href="a00458.html">SmallValueObject</a>. That design feature allows clients to use the new_handler without having the name of the new_handler function show up in classes derived from <a class="el" href="a00456.html">SmallObject</a> or <a class="el" href="a00458.html">SmallValueObject</a>. Thus, the only functions in the allocator which show up in <a class="el" href="a00456.html">SmallObject</a> or <a class="el" href="a00458.html">SmallValueObject</a> inheritance heierarchies are the new and delete operators.
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e1"></a><!-- doxytag: member="Loki::AllocatorSingleton::ClearExtraMemory" ref="e1" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;template&lt; class &gt; class TM, std::size_t CS, std::size_t MSOS, std::size_t OAS, template&lt; class &gt; class LP&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="a00452.html">Loki::AllocatorSingleton</a>&lt; TM, CS, MSOS, OAS, LP &gt;::ClearExtraMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clears any excess memory used by the allocator. Complexity is O(F + C) where F is the count of FixedAllocator's in the pool, and C is the number of Chunks in all FixedAllocator's. This never throws. <dl compact><dt><b>Note:</b></dt><dd>This function can be used as a new_handler when Loki and other memory allocators can no longer allocate. Although the C++ Standard allows new_handler functions to terminate the program when they can not release any memory, this will not do so.</dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>D:/temp/loki/include/loki/SmallObj.h</ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Sep 29 10:16:19 2005 for Loki by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
